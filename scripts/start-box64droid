## unset LD_PRELOAD in case termux-exec is installed
unset LD_PRELOAD
command="proot"
command+=" --link2symlink"
command+=" --kill-on-exit"
command+=" -0"
command+=" -r /data/data/com.termux/files/usr/var/lib/proot-distro/installed-rootfs/ubuntu"
command+=" -b /dev"
command+=" -b /proc"
command+=" -b /sys"
command+=" -b /data/data/com.termux/files/usr/var/lib/proot-distro/installed-rootfs/ubuntu/root:/dev/shm"
command+=" -b /data/data/com.termux/files/usr/tmp:/tmp"
command+=" -b /sdcard"
command+=" -w /root"
command+=" /usr/bin/env -i"
command+=" HOME=/root"
command+=" PATH=/usr/local/sbin:/usr/local/bin:/bin:/usr/bin:/sbin:/usr/sbin:/usr/games:/usr/local/games"
command+=" TERM=$TERM"
command+=" /bin/bash --login"
if [ ! -f $PREFIX/updated_linux ]; then 

    com="apt-get update -y && apt-get install --reinstall -y winbind zstd wget pv pip gcc-mingw-w64 libasound2-dev libpulse-dev libdbus-1-dev libfontconfig-dev libfreetype-dev libgnutls28-dev libgl-dev libunwind-dev libx11-dev libxcomposite-dev libxcursor-dev libxfixes-dev libxi-dev libxrandr-dev libxrender-dev libxext-dev libgstreamer1.0-dev libgstreamer-plugins-base1.0-dev libosmesa6-dev libsdl2-dev libudev-dev libvulkan-dev libcapi20-dev libcups2-dev libgphoto2-dev libsane-dev libkrb5-dev samba-dev ocl-icd-opencl-dev libpcap-dev libusb-1.0-0-dev libv4l-dev
    $command -c "$com"
    touch $PREFIX/updated_linux
    echo ""
    echo "Updates finished"
    clear
fi
com="$@"
if [ -z "$1" ];then
    exec $command
else
    $command -c "$com"
fi
